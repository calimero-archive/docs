---
title: Relayer Service
sidebar_position: 2
---

The relayer serves as a fundamental component of the bridge, designed with simplicity in mind. Its primary function is to receive blocks from a source chain and forward them to a light client contract on the destination chain, enabling seamless bidirectional communication between the two chains. To establish this bridge, it is crucial to have light client contracts deployed on both chains.

## Workflow Diagram

In the NEAR to Calimero bridge, the relayer actively monitors the NEAR blockchain for the latest blocks and efficiently relays them to the designated light client contract on the Calimero shard.


<img src={require('@site/static/img/relayer_simple.jpg').default} />

## Light Client block structure

Here is the light client block structure that is being relayed with its substructs:

```rust
pub struct LightClientBlock {
    pub prev_block_hash: Hash,
    pub next_block_inner_hash: Hash,
    pub inner_lite: BlockHeaderInnerLite,
    pub inner_rest_hash: Hash,
    pub next_bps: Option<Vec<Validator>>,
    pub approvals_after_next: Vec<Option<Signature>>,
}
```

```rust
pub struct BlockHeaderInnerLite {
    pub height: u64, // Height of this block since the genesis block (height 0).
    pub epoch_id: Hash, // Epoch start hash of this block's epoch. Used for retrieving validator information
    pub next_epoch_id: Hash,
    pub prev_state_root: Hash, // Root hash of the state at the previous block.
    pub outcome_root: Hash, // Root of the outcomes of transactions and receipts.
    pub timestamp: u64, // Timestamp at which the block was built.
    pub next_bp_hash: Hash, // Hash of the next epoch block producers set
    pub block_merkle_root: Hash,
}
```

```rust
pub enum Validator {
    V1(ValidatorV1),
    V2(ValidatorV2),
}
```

```rust
pub struct ValidatorV1 {
    pub account_id: String,
    pub public_key: PublicKey,
    pub stake: u128,
}
```

```rust
pub struct ValidatorV2 {
    pub account_id: String,
    pub public_key: PublicKey,
    pub stake: u128,
    pub is_chunk_only: bool,
}
```

```rust
pub enum Signature {
    ED25519(ed25519_dalek::Signature),
    SECP256K1(Secp256K1Signature),
}
```
